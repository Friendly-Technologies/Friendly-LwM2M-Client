<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Friendly LWM2M client: RPi Setup RPi to use with Friendly LWM2M client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Friendly LWM2M client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('rpi_setup_tag.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">RPi Setup RPi to use with Friendly LWM2M client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section contains a detailed description of setting up the RPi 4 and running the Friendly LWM2M client on it.</p>
<ul>
<li><a class="el" href="rpi_setup_tag.html#rpi_env">Environment</a></li>
<li><a class="el" href="rpi_setup_tag.html#rpi_flash">Flashing RPi 4 with the Ubuntu Server</a></li>
<li><a class="el" href="rpi_setup_tag.html#rpi_ssh">Setup SSH connection</a></li>
<li><a class="el" href="rpi_setup_tag.html#rpi_demo_board">Set up demo board</a></li>
<li><a class="el" href="rpi_setup_tag.html#rpi_running_demo">Running WppRPiExample</a></li>
</ul>
<h3><a class="anchor" id="rpi_env"></a>
Environment</h3>
<p><b>Raspberry Pi 4 Model B.</b><br  />
<b>Ubuntu Server 22.04.</b></p>
<h3><a class="anchor" id="rpi_flash"></a>
Flashing RPi 4 with the Ubuntu Server</h3>
<p>Use <b><a href="https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi#1-overview">this</a></b> guide, to install Ubuntu Server 22.04, at RPi 4 and set up an ssh connection.</p>
<p>Configurations of the required platform. </p><div class="image">
<img src="rpi_cfg6.png" alt="" width="550px"/>
</div>
<p>To simplify future usage we need to set custom settings, and press <b>EDIT SETTINGS</b>. </p><div class="image">
<img src="rpi_cfg7.png" alt="" width="550px"/>
</div>
<p>General settings, it is recommended to configure wireless LAN and enable SSH in the <b>SERVICE</b> tab. </p><div class="image">
<img src="rpi_cfg1.png" alt="" width="550px"/>
</div>
<h3><a class="anchor" id="rpi_ssh"></a>
Setup SSH connection</h3>
<p>After flashing, you need to insert the <b>SD</b> card into the <b>RPi 4</b> and connect the power. Once the system boots up, connect via SSH. To do this, you need to be on the same <b>subnet</b> as the RPi and find its IP address through the router's settings, or connect a display and keyboard to the RPi, then enter the command <b>ifconfig</b> in the terminal. To connect, execute the following command: <b>ssh wpp&lt;rpi_ip&gt;</b>.</p>
<p>If you need to add support for an Ethernet connection, you need to modify the configuration file <b>etc/netplan/50-cloud-init.yaml</b>. You can do this by using a keyboard and display or by removing the <b>SD</b> card from the <b>RPi</b>, inserting it into a PC, and modifying it there. The file with support for both Ethernet and WiFi looks like this, just replace the parameters with your WiFi access point details. </p><div class="image">
<img src="rpi_cfg2.png" alt="" width="850px"/>
</div>
<h3><a class="anchor" id="rpi_demo_board"></a>
Setup demo board</h3>
<div class="image">
<img src="rpi_demo_board.jpg" alt="" width="750px"/>
</div>
<p>For the hardware setup, you need 4 resistors of 10 kΩ, 3 resistors of 60 Ω, 3 LEDs, two buttons, and a board with sensors STEVAL-MKI217V1. Connection scheme.</p>
<div class="image">
<img src="rpi_circuit.png" alt="" width="750px"/>
</div>
<h3><a class="anchor" id="rpi_running_demo"></a>
Running WppRPiExample</h3>
<p>Using SSH, you need to transfer the <b>WppRPiExample</b> file to the <b>RPi 4</b>. First, you need to build the corresponding example for <b>wpp</b> lib. The output file will be located at the following path: **&lt;wpp_repo&gt;/_build/examples/raspberry_pi/WppRPiExample**. To move the executable file to the <b>RPi</b>, execute the following command: <b>scp WppRPiExample wpp&lt;rpi_ip&gt;:~/</b>. After this, the corresponding file should appear on the <b>RPi</b>. </p><div class="image">
<img src="rpi_cfg3.png" alt="" width="550px"/>
</div>
<p>The next step is to install the <b>libgpiod</b> library to access the output pins on the board. The command is: <b>sudo apt-get install libgpiod2</b>./n Now, you need to configure the automatic startup of <b>WppRPiExample</b> after the <b>RPi</b> is turned on. To do this, you need to create a service:</p><ul>
<li><b>sudo nano /etc/systemd/system/wpp_demo.service</b></li>
<li>Fill with the following content: <div class="image">
<img src="rpi_cfg4.png" alt="" width="750px"/>
</div>
</li>
<li><b>sudo systemctl daemon-reload</b></li>
<li><b>sudo systemctl enable wpp_demo.service</b></li>
<li><b>sudo systemctl start wpp_demo.service</b></li>
<li>And check the status: <b>sudo systemctl status wpp_demo.service</b> <div class="image">
<img src="rpi_cfg5.png" alt="" width="750px"/>
</div>
</li>
</ul>
<p>During operation, <b>WppRPiExample</b> generates a detailed log which is stored in the file **~/wpp_logs.txt**. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
